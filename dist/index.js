!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("classnames"));else if("function"==typeof define&&define.amd)define(["react","classnames"],t);else{var r="object"==typeof exports?t(require("react"),require("classnames")):t(e.React,e.classnames);for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(this,(function(e,t){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(1),l=r.n(s);var c=(e,t)=>{if([].slice.call(document.getElementsByTagName("script")).filter(t=>t.src===e).length)return void(t&&t());let r=document.createElement("script");r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,t())}:r.onload=function(){t()},r.type="text/javascript",r.src=e,document.getElementsByTagName("body")[0].appendChild(r)};var u=e=>{const{background:t}=e;return n.a.createElement("div",{className:"sc-player__background",style:{backgroundImage:`url(${t})`}})};var o=e=>{const{setCurrentTrack:t,soundcloud:r,sounds:a,trackIndex:s}=e;return n.a.createElement("button",{className:"sc-player__next",onClick:()=>{console.log("nextTrack",s),r.isPaused((function(e){e?r.next().pause():r.next()})),t(a[s+1],s+1)},type:"button"})};var i=e=>{const{soundcloud:t,trackPlaying:r}=e;return n.a.createElement("button",{className:l()("sc-player__play",{"sc-player--pause":r}),onClick:()=>{t.isPaused(e=>{e?t.play():t.pause()})},type:"button"})};var d=e=>{const{setCurrentTrack:t,soundcloud:r,sounds:a,trackIndex:s}=e;return n.a.createElement("button",{className:"sc-player__prev",onClick:()=>{r.isPaused((function(e){e?r.prev().pause():r.prev()})),t(a[s-1],s-1)},type:"button"})};var p=e=>{const{setCurrentTrack:t,soundcloud:r,sounds:a,trackIndex:s,trackPlaying:l}=e,c=a&&a.length>1;return n.a.createElement("div",{className:"sc-player__buttons"},c&&0!==s&&n.a.createElement(d,{setCurrentTrack:t,soundcloud:r,sounds:a,trackIndex:s}),n.a.createElement(i,{soundcloud:r,trackPlaying:l}),c&&s!==a.length-1&&n.a.createElement(o,{setCurrentTrack:t,soundcloud:r,sounds:a,trackIndex:s}))};var m=n.a.forwardRef((e,t)=>{const{track:r,playlist:a}=e;return n.a.createElement("iframe",{allow:"autoplay",frameBorder:"no",height:"450",ref:t,scrolling:"no",src:a?`https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/${a}&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true`:`https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${r}&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true`,title:"Soundcloud",width:"100%"})});var f=e=>{const{setCurrentTrack:t,soundcloud:r,sounds:a,theme:s}=e;if(!a||a&&a.length<2)return"";return n.a.createElement("ul",{className:l()("sc-player__playlist",{"sc-player--dark":"light"!==s})},a.map((e,s)=>{if(!e.title)return null;const l=e.artwork_url||e.user&&e.user.avatar_url||"";return n.a.createElement("li",{className:"sc-player__playlist__item",key:s,onClick:()=>(e=>{t(a[e],e),r.skip(e)})(s)},n.a.createElement("span",{className:"sc-player__playlist__thumb",style:{backgroundImage:`url(${l})`}}),n.a.createElement("span",{className:"sc-player__playlist__title"},e.title))}))};var y=e=>{const{artist:t,permalink:r,title:a}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"sc-player__artist"},n.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},t)),n.a.createElement("div",{className:"sc-player__title"},n.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},a)))};var _=()=>n.a.createElement("div",{className:"sc-player__shade"});var b=e=>{const{percentPlayed:t}=e;return n.a.createElement("div",{className:"sc-player__wave",style:{width:`${t}%`}})};r(3);t.default=e=>{const{mini:t,track:r,playlist:s,theme:o}=e;if(!r&&!s)throw new Error("Prop track or playlist required.");let[i,d]=Object(a.useState)([]),[k,v]=Object(a.useState)(0),[g,E]=Object(a.useState)(0),[h,j]=Object(a.useState)(null),[x,S]=Object(a.useState)(!1),[P,w]=Object(a.useState)(0),[O,N]=Object(a.useState)(null);const C=Object(a.useRef)(null),T=(e,t)=>{j({artist:e.user.username,background:e.artwork_url||e.user&&e.user.avatar_url||"",duration:e.duration,permalink_url:e.user.permalink_url,title:e.title}),w(t)};return Object(a.useEffect)(()=>{if(h){var e=Number((k.currentPosition/h.duration*100).toFixed(1));E(e)}},[h,k]),Object(a.useEffect)(()=>{c("https://w.soundcloud.com/player/api.js",()=>{N(SC.Widget(C.current))})},[]),Object(a.useEffect)(()=>{O&&(O.bind("ready",()=>{O.getSounds(e=>{const t=e.filter(e=>e.hasOwnProperty("title"));d(t),T(t[0],0)})}),O.bind(SC.Widget.Events.PAUSE,()=>{S(!1)}),O.bind(SC.Widget.Events.PLAY,S,!0),O.bind(SC.Widget.Events.PLAY_PROGRESS,(function(e){v(e)})))},[O]),n.a.createElement("div",{className:"sc-player"},h&&n.a.createElement("div",{className:l()("sc-player__current",{"sc-player--mini":t})},n.a.createElement(y,{artist:h.artist,permalink:h.permalink_url,title:h.title}),n.a.createElement(p,{setCurrentTrack:T,soundcloud:O,sounds:i,trackIndex:P,trackPlaying:x}),n.a.createElement(u,{background:h.background}),n.a.createElement(_,null),n.a.createElement(b,{percentPlayed:g})),n.a.createElement(f,{setCurrentTrack:T,soundcloud:O,sounds:i,theme:o}),n.a.createElement(m,{ref:C,playlist:s,track:r}))}},function(e,t){}])}));