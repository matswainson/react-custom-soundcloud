!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("classnames"));else if("function"==typeof define&&define.amd)define(["react","classnames"],t);else{var r="object"==typeof exports?t(require("react"),require("classnames")):t(e.React,e.classnames);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),l=r(1),u=r.n(l),c=function(e,t){var r=[].slice.call(document.getElementsByTagName("script"));if((r=r.filter((function(t){return t.src===e}))).length)t&&t();else{var n=document.createElement("script");n.onload=function(){t()},n.type="text/javascript",n.src=e,document.getElementsByTagName("body")[0].appendChild(n)}},s=function(e){var t=e.background;return a.a.createElement("div",{className:"sc-player__background",style:{backgroundImage:"url("+t+")"}})},o=function(e){var t=e.setCurrentTrack,r=e.soundcloud,n=e.sounds,l=e.trackIndex;return a.a.createElement("button",{className:"sc-player__next",onClick:function(){console.log("nextTrack",l),r.isPaused((function(e){e?r.next().pause():r.next()})),t(n[l+1],l+1)},type:"button"})},i=function(e){var t=e.soundcloud,r=e.trackPlaying;return a.a.createElement("button",{className:u()("sc-player__play",{"sc-player--pause":r}),onClick:function(){t.isPaused((function(e){e?t.play():t.pause()}))},type:"button"})},d=function(e){var t=e.setCurrentTrack,r=e.soundcloud,n=e.sounds,l=e.trackIndex;return a.a.createElement("button",{className:"sc-player__prev",onClick:function(){r.isPaused((function(e){e?r.prev().pause():r.prev()})),t(n[l-1],l-1)},type:"button"})},p=function(e){var t=e.setCurrentTrack,r=e.soundcloud,n=e.sounds,l=e.trackIndex,u=e.trackPlaying;if(!r)return null;var c=n&&n.length>1;return a.a.createElement("div",{className:"sc-player__buttons"},c&&0!==l&&a.a.createElement(d,{setCurrentTrack:t,soundcloud:r,sounds:n,trackIndex:l}),a.a.createElement(i,{soundcloud:r,trackPlaying:u}),c&&l!==n.length-1&&a.a.createElement(o,{setCurrentTrack:t,soundcloud:r,sounds:n,trackIndex:l}))},f=Object(n.forwardRef)((function(e,t){var r=e.track,n=e.playlist;return a.a.createElement("iframe",{allow:"autoplay",frameBorder:"no",height:"450",ref:t,scrolling:"no",src:n?"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/"+n+"&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true":"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+r+"&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true",title:"Soundcloud",width:"100%"})})),m=function(e){var t=e.setCurrentTrack,r=e.soundcloud,n=e.sounds,l=e.theme;if(!r||!n||n&&n.length<2)return null;return a.a.createElement("ul",{className:u()("sc-player__playlist",{"sc-player--dark":"light"!==l})},n.map((function(e,l){if(!e.title)return null;var u=e.artwork_url||e.user&&e.user.avatar_url||"";return a.a.createElement("li",{className:"sc-player__playlist__item",key:l,onClick:function(){return function(e){t(n[e],e),r.skip(e)}(l)}},a.a.createElement("span",{className:"sc-player__playlist__thumb",style:{backgroundImage:"url("+u+")"}}),a.a.createElement("span",{className:"sc-player__playlist__title"},e.title))})))},y=function(e){var t=e.artist,r=e.artistUrl,n=e.permalink,l=e.title;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sc-player__artist"},a.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},t)),a.a.createElement("div",{className:"sc-player__title"},a.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},l)))},_=function(){return a.a.createElement("div",{className:"sc-player__shade"})},b=function(e){var t=e.percentPlayed;return a.a.createElement("div",{className:"sc-player__wave",style:{width:t+"%"}})};r(3),t.default=function(e){var t=e.mini,r=e.track,l=e.playlist,o=e.theme;if(!r&&!l)throw new Error("Prop track or playlist required.");"light"!==o&&(o="dark");var i=Object(n.useState)([]),d=i[0],k=i[1],v=Object(n.useState)({currentPosition:0}),E=v[0],g=v[1],h=Object(n.useState)(0),w=h[0],j=h[1],x=Object(n.useState)(null),P=x[0],O=x[1],S=Object(n.useState)(!1),N=S[0],C=S[1],T=Object(n.useState)(0),I=T[0],U=T[1],q=Object(n.useState)(null),A=q[0],R=q[1],M=Object(n.useRef)(null),W=function(e,t){O({artist:e.user.username,artistUrl:e.user.permalink_url,background:e.artwork_url||e.user&&e.user.avatar_url||"",duration:e.duration,permalinkUrl:e.permalink_url,title:e.title}),U(t)};return Object(n.useEffect)((function(){if(P){var e=Number((E.currentPosition/P.duration*100).toFixed(1));j(e)}}),[P,E]),Object(n.useEffect)((function(){c("https://w.soundcloud.com/player/api.js",(function(){if(M.current){var e=window.SC.Widget(M.current);R(e)}}))}),[]),Object(n.useEffect)((function(){A&&(A.bind("ready",(function(){A.getSounds((function(e){var t=e.filter((function(e){return e.hasOwnProperty("title")}));k(t),W(t[0],0)}))})),A.bind(window.SC.Widget.Events.PAUSE,(function(){C(!1)})),A.bind(window.SC.Widget.Events.PLAY,(function(){C(!0)})),A.bind(window.SC.Widget.Events.PLAY_PROGRESS,(function(e){g(e)})))}),[A]),a.a.createElement("div",{className:"sc-player"},P&&a.a.createElement("div",{className:u()("sc-player__current",{"sc-player--mini":t})},a.a.createElement(y,{artist:P.artist,artistUrl:P.artistUrl,permalink:P.permalinkUrl,title:P.title}),a.a.createElement(p,{setCurrentTrack:W,soundcloud:A,sounds:d,trackIndex:I,trackPlaying:N}),a.a.createElement(s,{background:P.background}),a.a.createElement(_,null),a.a.createElement(b,{percentPlayed:w})),a.a.createElement(m,{setCurrentTrack:W,soundcloud:A,sounds:d,theme:o}),a.a.createElement(f,{ref:M,playlist:l,track:r}))}},function(e,t){}])}));